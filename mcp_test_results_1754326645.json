{
  "test_run_id": "mcp_test_1754326644",
  "timestamp": "2025-08-04T19:57:24.482805",
  "tests": {
    "health_check": {
      "api_gateway": {
        "status": "healthy",
        "response": {
          "status": "healthy",
          "gateway": "healthy",
          "services": [
            {
              "name": "airtable-gateway",
              "status": "healthy",
              "url": "http://airtable-gateway:8002",
              "response_time": 0.026436
            },
            {
              "name": "mcp-server",
              "status": "healthy",
              "url": "http://mcp-server:8001",
              "response_time": 0.010179
            },
            {
              "name": "llm-orchestrator",
              "status": "healthy",
              "url": "http://llm-orchestrator:8003",
              "response_time": 0.010757
            }
          ],
          "websocket_stats": {
            "total_connections": 0,
            "active_connections": 0,
            "messages_sent": 0,
            "messages_queued": 0,
            "rate_limit_violations": 0,
            "authentication_failures": 0,
            "active_sessions": 0,
            "queued_messages_total": 0,
            "average_messages_per_connection": 0.0
          },
          "timestamp": "2025-07-31T19:30:00Z"
        },
        "url": "http://localhost:8000/api/health"
      },
      "llm_orchestrator": {
        "status": "healthy",
        "response": {
          "status": "healthy",
          "service": "llm-orchestrator",
          "version": "2.0.0",
          "session_manager": {
            "active_manager": "redis",
            "postgres_available": false,
            "redis_available": true,
            "memory_available": true,
            "use_postgres": false,
            "use_redis_fallback": true,
            "session_timeout": 3600,
            "redis_healthy": true
          },
          "cost_tracking": {
            "enabled": false,
            "status": "disabled"
          }
        },
        "url": "http://localhost:8003/health"
      },
      "mcp_server": {
        "status": "healthy",
        "response": {
          "status": "healthy",
          "service": "mcp-server-http",
          "version": "1.0.0"
        },
        "url": "http://localhost:8001/health"
      },
      "airtable_gateway": {
        "status": "healthy",
        "response": {
          "status": "healthy",
          "service": "airtable-gateway",
          "cache": {
            "status": "disconnected",
            "error": "No Redis connection"
          }
        },
        "url": "http://localhost:8002/health"
      },
      "platform_services": {
        "status": "error",
        "error": "Cannot connect to host localhost:8007 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8007, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8007)]",
        "url": "http://localhost:8007/health"
      },
      "automation_services": {
        "status": "error",
        "error": "Cannot connect to host localhost:8006 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8006, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8006)]",
        "url": "http://localhost:8006/health"
      },
      "saga_orchestrator": {
        "status": "error",
        "error": "Cannot connect to host localhost:8008 ssl:default [Multiple exceptions: [Errno 61] Connect call failed ('::1', 8008, 0, 0), [Errno 61] Connect call failed ('127.0.0.1', 8008)]",
        "url": "http://localhost:8008/health"
      },
      "frontend": {
        "status": "unhealthy",
        "error": "HTTP 404",
        "url": "http://localhost:3000/api/health"
      }
    },
    "api_chat": {
      "status": "success",
      "response": {
        "response": "I need your Airtable base ID to help you. Please provide your base ID (it looks like 'appXXXXXXXXXXXXXX').",
        "thinking_process": "Used legacy function calling with 0 tool calls. Budget: 50000",
        "tools_used": [],
        "session_id": "test-session-1754326645",
        "timestamp": "2025-08-04T16:57:25.712630",
        "cost_info": null
      },
      "url": "http://localhost:8000/api/chat"
    },
    "mcp_tools": {
      "status": "success",
      "tools": [
        {
          "name": "list_tables",
          "description": "List all tables in an Airtable base",
          "inputSchema": {
            "type": "object",
            "properties": {
              "base_id": {
                "type": "string",
                "description": "Airtable base ID (e.g., appXXXXXXXXXXXXXX)"
              }
            },
            "required": [
              "base_id"
            ]
          }
        },
        {
          "name": "get_records",
          "description": "Retrieve records from an Airtable table",
          "inputSchema": {
            "type": "object",
            "properties": {
              "base_id": {
                "type": "string",
                "description": "Airtable base ID"
              },
              "table_id": {
                "type": "string",
                "description": "Table ID or name"
              },
              "max_records": {
                "type": "integer",
                "description": "Maximum number of records to return (default: 100)",
                "default": 100
              },
              "view": {
                "type": "string",
                "description": "View name or ID to filter by"
              },
              "filter_by_formula": {
                "type": "string",
                "description": "Airtable formula to filter records"
              }
            },
            "required": [
              "base_id",
              "table_id"
            ]
          }
        },
        {
          "name": "create_record",
          "description": "Create a new record in an Airtable table",
          "inputSchema": {
            "type": "object",
            "properties": {
              "base_id": {
                "type": "string",
                "description": "Airtable base ID"
              },
              "table_id": {
                "type": "string",
                "description": "Table ID or name"
              },
              "fields": {
                "type": "object",
                "description": "Field values for the new record"
              }
            },
            "required": [
              "base_id",
              "table_id",
              "fields"
            ]
          }
        },
        {
          "name": "update_record",
          "description": "Update an existing record in an Airtable table",
          "inputSchema": {
            "type": "object",
            "properties": {
              "base_id": {
                "type": "string",
                "description": "Airtable base ID"
              },
              "table_id": {
                "type": "string",
                "description": "Table ID or name"
              },
              "record_id": {
                "type": "string",
                "description": "Record ID to update"
              },
              "fields": {
                "type": "object",
                "description": "Field values to update"
              }
            },
            "required": [
              "base_id",
              "table_id",
              "record_id",
              "fields"
            ]
          }
        },
        {
          "name": "delete_record",
          "description": "Delete a record from an Airtable table",
          "inputSchema": {
            "type": "object",
            "properties": {
              "base_id": {
                "type": "string",
                "description": "Airtable base ID"
              },
              "table_id": {
                "type": "string",
                "description": "Table ID or name"
              },
              "record_id": {
                "type": "string",
                "description": "Record ID to delete"
              }
            },
            "required": [
              "base_id",
              "table_id",
              "record_id"
            ]
          }
        },
        {
          "name": "search_records",
          "description": "Search records in an Airtable table with advanced filtering",
          "inputSchema": {
            "type": "object",
            "properties": {
              "base_id": {
                "type": "string",
                "description": "Airtable base ID"
              },
              "table_id": {
                "type": "string",
                "description": "Table ID or name"
              },
              "query": {
                "type": "string",
                "description": "Search query text"
              },
              "fields": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Specific fields to search in"
              },
              "max_records": {
                "type": "integer",
                "description": "Maximum number of records to return",
                "default": 50
              }
            },
            "required": [
              "base_id",
              "table_id",
              "query"
            ]
          }
        },
        {
          "name": "create_metadata_table",
          "description": "Create a table containing metadata about all tables in a base",
          "inputSchema": {
            "type": "object",
            "properties": {
              "base_id": {
                "type": "string",
                "description": "Airtable base ID to analyze"
              },
              "table_name": {
                "type": "string",
                "description": "Name for the metadata table",
                "default": "Table Metadata"
              }
            },
            "required": [
              "base_id"
            ]
          }
        },
        {
          "name": "batch_create_records",
          "description": "Create multiple records in a single operation (efficient for bulk data)",
          "inputSchema": {
            "type": "object",
            "properties": {
              "base_id": {
                "type": "string",
                "description": "Airtable base ID"
              },
              "table_id": {
                "type": "string",
                "description": "Table ID or name"
              },
              "records": {
                "type": "array",
                "items": {
                  "type": "object",
                  "description": "Record fields object"
                },
                "description": "Array of record objects to create"
              }
            },
            "required": [
              "base_id",
              "table_id",
              "records"
            ]
          }
        },
        {
          "name": "batch_update_records",
          "description": "Update multiple records in a single operation",
          "inputSchema": {
            "type": "object",
            "properties": {
              "base_id": {
                "type": "string",
                "description": "Airtable base ID"
              },
              "table_id": {
                "type": "string",
                "description": "Table ID or name"
              },
              "records": {
                "type": "array",
                "items": {
                  "type": "object",
                  "properties": {
                    "id": {
                      "type": "string"
                    },
                    "fields": {
                      "type": "object"
                    }
                  },
                  "required": [
                    "id",
                    "fields"
                  ]
                },
                "description": "Array of records with IDs and fields to update"
              }
            },
            "required": [
              "base_id",
              "table_id",
              "records"
            ]
          }
        },
        {
          "name": "get_field_info",
          "description": "Get detailed information about fields in a table",
          "inputSchema": {
            "type": "object",
            "properties": {
              "base_id": {
                "type": "string",
                "description": "Airtable base ID"
              },
              "table_id": {
                "type": "string",
                "description": "Table ID or name"
              }
            },
            "required": [
              "base_id",
              "table_id"
            ]
          }
        },
        {
          "name": "analyze_table_data",
          "description": "Analyze table data to show statistics, patterns, and data quality insights",
          "inputSchema": {
            "type": "object",
            "properties": {
              "base_id": {
                "type": "string",
                "description": "Airtable base ID"
              },
              "table_id": {
                "type": "string",
                "description": "Table ID or name"
              },
              "sample_size": {
                "type": "integer",
                "description": "Number of records to analyze (default: 100)",
                "default": 100
              }
            },
            "required": [
              "base_id",
              "table_id"
            ]
          }
        },
        {
          "name": "find_duplicates",
          "description": "Find duplicate records in a table based on specified fields",
          "inputSchema": {
            "type": "object",
            "properties": {
              "base_id": {
                "type": "string",
                "description": "Airtable base ID"
              },
              "table_id": {
                "type": "string",
                "description": "Table ID or name"
              },
              "fields": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Field names to check for duplicates"
              },
              "ignore_empty": {
                "type": "boolean",
                "description": "Whether to ignore empty values when checking duplicates",
                "default": true
              }
            },
            "required": [
              "base_id",
              "table_id",
              "fields"
            ]
          }
        },
        {
          "name": "export_table_csv",
          "description": "Export table data to CSV format (useful for data analysis)",
          "inputSchema": {
            "type": "object",
            "properties": {
              "base_id": {
                "type": "string",
                "description": "Airtable base ID"
              },
              "table_id": {
                "type": "string",
                "description": "Table ID or name"
              },
              "fields": {
                "type": "array",
                "items": {
                  "type": "string"
                },
                "description": "Specific fields to export (optional - all fields if not specified)"
              },
              "view": {
                "type": "string",
                "description": "View name or ID to export"
              },
              "max_records": {
                "type": "integer",
                "description": "Maximum number of records to export",
                "default": 1000
              }
            },
            "required": [
              "base_id",
              "table_id"
            ]
          }
        },
        {
          "name": "sync_tables",
          "description": "Compare and sync data between two tables (useful for data migration/backup)",
          "inputSchema": {
            "type": "object",
            "properties": {
              "source_base_id": {
                "type": "string",
                "description": "Source base ID"
              },
              "source_table_id": {
                "type": "string",
                "description": "Source table ID"
              },
              "target_base_id": {
                "type": "string",
                "description": "Target base ID"
              },
              "target_table_id": {
                "type": "string",
                "description": "Target table ID"
              },
              "key_field": {
                "type": "string",
                "description": "Field name to use as unique identifier for syncing"
              },
              "dry_run": {
                "type": "boolean",
                "description": "If true, only show what would be synced without making changes",
                "default": true
              }
            },
            "required": [
              "source_base_id",
              "source_table_id",
              "target_base_id",
              "target_table_id",
              "key_field"
            ]
          }
        }
      ],
      "url": "http://localhost:8000/api/tools"
    },
    "table_list": {
      "status": "success",
      "response": {
        "response": "I need your Airtable base ID to help you. Please provide your base ID (it looks like 'appXXXXXXXXXXXXXX').",
        "thinking_process": "Used legacy function calling with 0 tool calls. Budget: 50000",
        "tools_used": [],
        "session_id": "table-list-test-1754326645",
        "timestamp": "2025-08-04T16:57:25.722789",
        "cost_info": null
      },
      "url": "http://localhost:8000/api/chat"
    },
    "metadata_table_creation": {
      "status": "unclear",
      "response": {
        "response": "I need your Airtable base ID to help you. Please provide your base ID (it looks like 'appXXXXXXXXXXXXXX').",
        "thinking_process": "Used legacy function calling with 0 tool calls. Budget: 50000",
        "tools_used": [],
        "session_id": "metadata-test-1754326645",
        "timestamp": "2025-08-04T16:57:25.726687",
        "cost_info": null
      },
      "url": "http://localhost:8000/api/chat"
    }
  },
  "summary": {
    "total_tests": 5,
    "passed_tests": 3,
    "failed_tests": 2,
    "success_rate": 0.6
  }
}