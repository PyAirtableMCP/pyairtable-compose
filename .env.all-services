# PyAirtable Microservices Configuration - All 22 Services
# Copy this file to .env and update with your values

# =============================================================================
# SECURITY CONFIGURATION (CRITICAL - NEVER COMMIT ACTUAL VALUES)
# =============================================================================

# Database Configuration
POSTGRES_USER=admin
POSTGRES_PASSWORD=changeme  # CHANGE THIS! Use: openssl rand -base64 32
POSTGRES_DB=pyairtable

# Redis Configuration
REDIS_PASSWORD=changeme  # CHANGE THIS! Use: openssl rand -base64 32

# API Keys and Secrets
AIRTABLE_TOKEN=patewow2oXotOdgpz.c7e78f8a5d17f20dfcbe7d32736dd06f56916af7e1549d88ed8f6791a2eaf654  # Your Airtable Personal Access Token (pat_xxx)
GEMINI_API_KEY=AIzaSyCwAGazN5GMCu03ZYLFWWTkdLRKFQb-OxU  # Your Google Gemini API key
API_KEY=  # Internal API key for service-to-service communication
JWT_SECRET=  # CHANGE THIS! Use: openssl rand -base64 32

# =============================================================================
# SERVICE CONFIGURATION
# =============================================================================

# Environment
ENVIRONMENT=development
LOG_LEVEL=info
THINKING_BUDGET=5

# =============================================================================
# GO SERVICES (Ports 8080-8090)
# =============================================================================

# API Gateway (8080)
API_GATEWAY_HOST=0.0.0.0
API_GATEWAY_PORT=8080

# Auth Service (8081)
AUTH_SERVICE_HOST=0.0.0.0
AUTH_SERVICE_PORT=8081
AUTH_TOKEN_EXPIRY=86400  # 24 hours
AUTH_REFRESH_TOKEN_EXPIRY=604800  # 7 days

# User Service (8082)
USER_SERVICE_HOST=0.0.0.0
USER_SERVICE_PORT=8082

# Tenant Service (8083)
TENANT_SERVICE_HOST=0.0.0.0
TENANT_SERVICE_PORT=8083
MAX_WORKSPACES_PER_TENANT=10

# Workspace Service (8084)
WORKSPACE_SERVICE_HOST=0.0.0.0
WORKSPACE_SERVICE_PORT=8084

# Permission Service (8085)
PERMISSION_SERVICE_HOST=0.0.0.0
PERMISSION_SERVICE_PORT=8085

# Webhook Service (8086)
WEBHOOK_SERVICE_HOST=0.0.0.0
WEBHOOK_SERVICE_PORT=8086
WEBHOOK_TIMEOUT=30
WEBHOOK_MAX_RETRIES=3

# Notification Service (8087)
NOTIFICATION_SERVICE_HOST=0.0.0.0
NOTIFICATION_SERVICE_PORT=8087

# File Service (8088)
FILE_SERVICE_HOST=0.0.0.0
FILE_SERVICE_PORT=8088
MAX_FILE_SIZE=10485760  # 10MB
ALLOWED_FILE_TYPES=jpg,jpeg,png,gif,pdf,doc,docx,xls,xlsx,csv

# Web BFF (8089)
WEB_BFF_HOST=0.0.0.0
WEB_BFF_PORT=8089

# Mobile BFF (8090)
MOBILE_BFF_HOST=0.0.0.0
MOBILE_BFF_PORT=8090

# =============================================================================
# PYTHON SERVICES (Ports 8091-8101)
# =============================================================================

# LLM Orchestrator (8091)
LLM_ORCHESTRATOR_HOST=0.0.0.0
LLM_ORCHESTRATOR_PORT=8091

# MCP Server (8092)
MCP_SERVER_HOST=0.0.0.0
MCP_SERVER_PORT=8092
MCP_SERVER_MODE=http

# Airtable Gateway (8093)
AIRTABLE_GATEWAY_HOST=0.0.0.0
AIRTABLE_GATEWAY_PORT=8093
AIRTABLE_RATE_LIMIT=5  # requests per second

# Schema Service (8094)
SCHEMA_SERVICE_HOST=0.0.0.0
SCHEMA_SERVICE_PORT=8094

# Formula Engine (8095)
FORMULA_ENGINE_HOST=0.0.0.0
FORMULA_ENGINE_PORT=8095
FORMULA_TIMEOUT=10

# Embedding Service (8096)
EMBEDDING_SERVICE_HOST=0.0.0.0
EMBEDDING_SERVICE_PORT=8096
EMBEDDING_MODEL=text-embedding-ada-002
EMBEDDING_DIMENSIONS=1536

# Semantic Search (8097)
SEMANTIC_SEARCH_HOST=0.0.0.0
SEMANTIC_SEARCH_PORT=8097
SEARCH_RESULTS_LIMIT=50

# Chat Service (8098)
CHAT_SERVICE_HOST=0.0.0.0
CHAT_SERVICE_PORT=8098
CHAT_HISTORY_LIMIT=100

# Workflow Engine (8099)
WORKFLOW_ENGINE_HOST=0.0.0.0
WORKFLOW_ENGINE_PORT=8099
WORKFLOW_EXECUTION_TIMEOUT=300

# Analytics Service (8100)
ANALYTICS_SERVICE_HOST=0.0.0.0
ANALYTICS_SERVICE_PORT=8100

# Audit Service (8101)
AUDIT_SERVICE_HOST=0.0.0.0
AUDIT_SERVICE_PORT=8101
AUDIT_RETENTION_DAYS=90

# =============================================================================
# SERVICE URLS (for inter-service communication)
# =============================================================================

# Go Services
API_GATEWAY_URL=http://api-gateway:8080
AUTH_SERVICE_URL=http://auth-service:8081
USER_SERVICE_URL=http://user-service:8082
TENANT_SERVICE_URL=http://tenant-service:8083
WORKSPACE_SERVICE_URL=http://workspace-service:8084
PERMISSION_SERVICE_URL=http://permission-service:8085
WEBHOOK_SERVICE_URL=http://webhook-service:8086
NOTIFICATION_SERVICE_URL=http://notification-service:8087
FILE_SERVICE_URL=http://file-service:8088
WEB_BFF_URL=http://web-bff:8089
MOBILE_BFF_URL=http://mobile-bff:8090

# Python Services
LLM_ORCHESTRATOR_URL=http://llm-orchestrator:8091
MCP_SERVER_URL=http://mcp-server:8092
AIRTABLE_GATEWAY_URL=http://airtable-gateway:8093
SCHEMA_SERVICE_URL=http://schema-service:8094
FORMULA_ENGINE_URL=http://formula-engine:8095
EMBEDDING_SERVICE_URL=http://embedding-service:8096
SEMANTIC_SEARCH_URL=http://semantic-search:8097
CHAT_SERVICE_URL=http://chat-service:8098
WORKFLOW_ENGINE_URL=http://workflow-engine:8099
ANALYTICS_SERVICE_URL=http://analytics-service:8100
AUDIT_SERVICE_URL=http://audit-service:8101

# =============================================================================
# SECURITY & CORS
# =============================================================================

CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_METHODS=GET,POST,PUT,DELETE,PATCH,OPTIONS
CORS_HEADERS=Content-Type,Authorization,X-API-Key,X-Request-ID
CORS_CREDENTIALS=true
CORS_MAX_AGE=86400

# Rate Limiting
DEFAULT_RATE_LIMIT=100  # requests per minute
BURST_RATE_LIMIT=200    # requests per minute

# =============================================================================
# PERFORMANCE TUNING
# =============================================================================

# Database
DB_MAX_OPEN_CONNS=25
DB_MAX_IDLE_CONNS=25
DB_CONN_MAX_LIFETIME=300

# Redis
REDIS_POOL_SIZE=10
REDIS_MIN_IDLE_CONNS=5
CACHE_TTL=3600

# Service Workers
MAX_WORKERS=4
CONNECTION_POOL_SIZE=10

# =============================================================================
# FEATURE FLAGS
# =============================================================================

ENABLE_WEBHOOKS=true
ENABLE_ANALYTICS=true
ENABLE_AUDIT_LOGGING=true
ENABLE_SEMANTIC_SEARCH=true
ENABLE_WORKFLOW_AUTOMATION=true

# =============================================================================
# MONITORING & OBSERVABILITY
# =============================================================================

METRICS_ENABLED=true
METRICS_PORT=9090
TRACING_ENABLED=false
TRACING_ENDPOINT=http://jaeger:14268/api/traces

# =============================================================================
# EXTERNAL SERVICES (Optional)
# =============================================================================

# Notifications
SLACK_WEBHOOK_URL=
SENDGRID_API_KEY=
TWILIO_ACCOUNT_SID=
TWILIO_AUTH_TOKEN=

# Storage
AWS_ACCESS_KEY_ID=
AWS_SECRET_ACCESS_KEY=
AWS_REGION=us-east-1
S3_BUCKET_NAME=

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Sample Airtable Base for testing
AIRTABLE_BASE=appVLUAubH5cFWhMV

# Debug Mode
DEBUG=false
VERBOSE_LOGGING=false